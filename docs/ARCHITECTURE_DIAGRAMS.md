# Business Services Hub - Architecture Diagrams

## System Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           Business Services Hub Platform                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        Frontend Layer (Next.js 14)                    │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Client    │  │  Provider   │  │   Admin     │  │   Public    │   │    │
│  │  │  Dashboard  │  │  Dashboard  │  │  Dashboard  │  │   Pages     │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  │                                                                         │    │
│  │  ┌─────────────────────────────────────────────────────────────────┐   │    │
│  │  │                    UI Components (shadcn/ui)                   │   │    │
│  │  │  Forms │ Tables │ Cards │ Buttons │ Modals │ Charts │ Icons    │   │    │
│  │  └─────────────────────────────────────────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      API Layer (Next.js API Routes)                   │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │  Services   │  │  Bookings   │  │  Messages   │  │  Progress   │   │    │
│  │  │    API      │  │     API     │  │     API     │  │     API     │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  │                                                                         │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │  Payments   │  │  Analytics  │  │  Webhooks   │  │  Notifications│   │    │
│  │  │     API     │  │     API     │  │     API     │  │     API     │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      Backend Services (Supabase)                      │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │ PostgreSQL  │  │   Auth      │  │   Storage   │  │   Realtime  │   │    │
│  │  │  Database   │  │  Service    │  │   Service   │  │   Service   │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  │                                                                         │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Edge      │  │   RLS       │  │   Triggers  │  │   Functions │   │    │
│  │  │ Functions   │  │  Policies   │  │   & Hooks   │  │   & Views   │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                    External Integrations                               │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Stripe    │  │   Resend    │  │   Make.com  │  │   Vercel    │   │    │
│  │  │  Payments   │  │    Email    │  │ Automation  │  │   CDN       │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Database Schema Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            Database Schema Overview                            │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        User Management                                 │    │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │    │
│  │  │   profiles  │◄───┤ auth.users  │───►│  companies  │                │    │
│  │  │             │    │             │    │             │                │    │
│  │  │ • id (PK)   │    │ • id (PK)   │    │ • id (PK)   │                │    │
│  │  │ • full_name │    │ • email     │    │ • name      │                │    │
│  │  │ • role      │    │ • created_at│    │ • address   │                │    │
│  │  │ • company_id│    │ • updated_at│    │ • phone     │                │    │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      Services & Bookings                              │    │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │    │
│  │  │  services   │    │  bookings   │    │  packages   │                │    │
│  │  │             │    │             │    │             │                │    │
│  │  │ • id (PK)   │◄───┤ • service_id│    │ • id (PK)   │                │    │
│  │  │ • provider_id│   │ • provider_id│   │ • service_id│                │    │
│  │  │ • title     │    │ • client_id │    │ • name      │                │    │
│  │  │ • category  │    │ • status    │    │ • price     │                │    │
│  │  │ • base_price│    │ • amount    │    │ • features  │                │    │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                    Communication & Tracking                           │    │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │    │
│  │  │  messages   │    │ milestones  │    │    tasks    │                │    │
│  │  │             │    │             │    │             │                │    │
│  │  │ • id (PK)   │    │ • id (PK)   │    │ • id (PK)   │                │    │
│  │  │ • booking_id│    │ • booking_id│◄───┤ • milestone_id│              │    │
│  │  │ • sender_id │    │ • title     │    │ • title     │                │    │
│  │  │ • content   │    │ • status    │    │ • status    │                │    │
│  │  │ • created_at│    │ • due_date  │    │ • due_date  │                │    │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      Financial & Reviews                              │    │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │    │
│  │  │  invoices   │    │  reviews    │    │  payments   │                │    │
│  │  │             │    │             │    │             │                │    │
│  │  │ • id (PK)   │    │ • id (PK)   │    │ • id (PK)   │                │    │
│  │  │ • booking_id│    │ • booking_id│    │ • invoice_id│                │    │
│  │  │ • amount    │    │ • rating    │    │ • amount    │                │    │
│  │  │ • status    │    │ • comment   │    │ • status    │                │    │
│  │  │ • due_date  │    │ • created_at│    │ • method    │                │    │
│  │  └─────────────┘    └─────────────┘    └─────────────┘                │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## User Journey Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              User Journey Flow                                 │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ Registration│───►│ Onboarding  │───►│ Service     │───►│   Booking   │     │
│  │             │    │             │    │ Discovery   │    │             │     │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘     │
│         │                   │                   │                   │         │
│         ▼                   ▼                   ▼                   ▼         │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ Profile     │    │ Role        │    │ Service     │    │ Payment     │     │
│  │ Setup       │    │ Selection   │    │ Details     │    │ Processing  │     │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘     │
│         │                   │                   │                   │         │
│         ▼                   ▼                   ▼                   ▼         │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ Dashboard   │───►│ Project     │───►│ Communication│───►│ Completion  │     │
│  │ Access      │    │ Tracking    │    │ & Messaging │    │ & Review    │     │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘     │
│         │                   │                   │                   │         │
│         ▼                   ▼                   ▼                   ▼         │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ Analytics   │    │ Milestone   │    │ File        │    │ Financial   │     │
│  │ & Reports   │    │ Management  │    │ Sharing     │    │ Reports     │     │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘     │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Component Hierarchy

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            Component Hierarchy                                  │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  App (Next.js 14)                                                               │
│  ├── Layout Components                                                          │
│  │   ├── Header                                                                 │
│  │   │   ├── Navigation                                                         │
│  │   │   ├── User Menu                                                         │
│  │   │   └── Notifications                                                     │
│  │   ├── Sidebar                                                                │
│  │   │   ├── Navigation Menu                                                    │
│  │   │   ├── Quick Actions                                                      │
│  │   │   └── User Profile                                                       │
│  │   └── Footer                                                                 │
│  │       ├── Links                                                              │
│  │       └── Social Media                                                       │
│  ├── Page Components                                                            │
│  │   ├── Dashboard Pages                                                        │
│  │   │   ├── Client Dashboard                                                   │
│  │   │   │   ├── KPI Cards                                                     │
│  │   │   │   ├── Recent Bookings                                                │
│  │   │   │   ├── Service Suggestions                                            │
│  │   │   │   └── Spending Analytics                                             │
│  │   │   ├── Provider Dashboard                                                 │
│  │   │   │   ├── Business Metrics                                               │
│  │   │   │   ├── Earnings Chart                                                 │
│  │   │   │   ├── Top Services                                                   │
│  │   │   │   └── Performance Analytics                                          │
│  │   │   └── Admin Dashboard                                                    │
│  │   │       ├── User Management                                                │
│  │   │       ├── Platform Analytics                                             │
│  │   │       ├── Content Moderation                                             │
│  │   │       └── System Monitoring                                              │
│  │   ├── Service Pages                                                          │
│  │   │   ├── Service Catalog                                                    │
│  │   │   ├── Service Details                                                    │
│  │   │   ├── Service Creation                                                   │
│  │   │   └── Service Management                                                 │
│  │   └── Auth Pages                                                             │
│  │       ├── Sign In                                                            │
│  │       ├── Sign Up                                                            │
│  │       ├── Forgot Password                                                    │
│  │       └── Onboarding                                                         │
│  ├── Feature Components                                                         │
│  │   ├── Progress Tracking                                                      │
│  │   │   ├── Milestone Management                                               │
│  │   │   ├── Task Management                                                    │
│  │   │   ├── Progress Analytics                                                 │
│  │   │   └── Timeline Visualization                                             │
│  │   ├── Messaging System                                                       │
│  │   │   ├── Message Thread                                                     │
│  │   │   ├── File Sharing                                                       │
│  │   │   ├── Message Input                                                      │
│  │   │   └── Message History                                                    │
│  │   └── Analytics                                                              │
│  │       ├── Charts & Graphs                                                    │
│  │       ├── KPI Widgets                                                        │
│  │       ├── Reports                                                            │
│  │       └── Data Export                                                        │
│  └── UI Components (shadcn/ui)                                                  │
│      ├── Form Components                                                        │
│      │   ├── Input Fields                                                       │
│      │   ├── Select Dropdowns                                                   │
│      │   ├── Checkboxes                                                         │
│      │   ├── Radio Buttons                                                      │
│      │   └── Form Validation                                                    │
│      ├── Data Display                                                           │
│      │   ├── Tables                                                             │
│      │   ├── Cards                                                              │
│      │   ├── Badges                                                             │
│      │   ├── Progress Bars                                                      │
│      │   └── Charts                                                             │
│      ├── Navigation                                                             │
│      │   ├── Tabs                                                               │
│      │   ├── Breadcrumbs                                                        │
│      │   ├── Pagination                                                         │
│      │   └── Sidebar                                                            │
│      └── Feedback                                                               │
│          ├── Modals                                                             │
│          ├── Toasts                                                             │
│          ├── Alerts                                                             │
│          └── Loading States                                                     │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## API Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              API Architecture                                  │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        Client Layer                                    │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   React     │  │   Next.js   │  │   Axios     │  │   SWR       │   │    │
│  │  │ Components  │  │   API       │  │   HTTP      │  │   Caching   │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      API Gateway Layer                                 │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Rate      │  │   Auth      │  │   CORS      │  │   Logging   │   │    │
│  │  │  Limiting   │  │  Middleware │  │   Headers   │  │   & Metrics │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        API Routes Layer                                │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │  Services   │  │  Bookings   │  │  Messages   │  │  Progress   │   │    │
│  │  │    API      │  │     API     │  │     API     │  │     API     │   │    │
│  │  │             │    │             │    │             │    │             │    │
│  │  │ GET /api/   │    │ GET /api/   │    │ GET /api/   │    │ GET /api/   │    │
│  │  │ services    │    │ bookings    │    │ messages    │    │ progress/   │    │
│  │  │             │    │             │    │             │    │ [id]        │    │
│  │  │ POST /api/  │    │ POST /api/  │    │ POST /api/  │    │ POST /api/  │    │
│  │  │ services    │    │ bookings    │    │ messages    │    │ milestones  │    │
│  │  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘   │    │
│  │                                                                         │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │  Payments   │  │  Analytics  │  │  Webhooks   │  │  Notifications│   │    │
│  │  │     API     │  │     API     │  │     API     │  │     API     │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      Business Logic Layer                              │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │ Validation  │  │   Service   │  │   Error     │  │   Logging   │   │    │
│  │  │   Layer     │  │    Layer    │  │  Handling   │  │    Layer    │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        Data Access Layer                               │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │ Supabase    │  │   Database  │  │   Storage   │  │   Realtime  │   │    │
│  │  │   Client    │  │   Queries   │  │   Queries   │  │  Subscriptions│   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            Security Architecture                               │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        Frontend Security                               │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Input     │  │   XSS       │  │   CSRF      │  │   Content   │   │    │
│  │  │ Validation  │  │ Protection  │  │ Protection  │  │ Security    │   │    │
│  │  │   (Zod)     │  │   (CSP)     │  │   (Tokens)  │  │   Policy    │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        API Security                                   │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   JWT       │  │   Rate      │  │   CORS      │  │   Input     │   │    │
│  │  │   Auth      │  │  Limiting   │  │   Headers   │  │ Validation  │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      Database Security                                 │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Row       │  │   SQL       │  │   Data      │  │   Audit     │   │    │
│  │  │   Level     │  │ Injection   │  │ Encryption  │  │   Logging   │   │    │
│  │  │ Security    │  │ Protection  │  │   (TLS)     │  │             │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                    External Service Security                          │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Stripe    │  │   Resend    │  │   Make.com  │  │   Vercel    │   │    │
│  │  │   PCI       │  │   API       │  │   Webhook   │  │   DDoS      │   │    │
│  │  │ Compliance  │  │   Keys      │  │   Security  │  │ Protection  │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Performance Optimization Strategy

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                        Performance Optimization Strategy                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        Frontend Optimizations                         │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Next.js   │  │   React     │  │   Image     │  │   Code      │   │    │
│  │  │   App       │  │   Memo      │  │ Optimization│  │ Splitting   │   │    │
│  │  │   Router    │  │   & Hooks   │  │   (WebP)    │  │   (Dynamic) │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  │                                                                         │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   Lazy      │  │   Virtual   │  │   Debounced │  │   Caching   │   │    │
│  │  │   Loading   │  │   Scrolling │  │   Search    │  │   (SWR)     │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                        Backend Optimizations                          │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │ Database    │  │   Query     │  │ Connection  │  │   Redis     │   │    │
│  │  │ Indexing    │  │ Optimization│  │ Pooling     │  │   Caching   │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  │                                                                         │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │   API       │  │   Response  │  │   CDN       │  │   Edge      │   │    │
│  │  │ Pagination  │  │ Compression │  │   Caching   │  │ Functions   │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                    │                                            │
│                                    ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                      Real-time Optimizations                          │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │    │
│  │  │ Selective   │  │ Connection  │  │ Message     │  │   Error     │   │    │
│  │  │ Subscriptions│  │ Management │  │ Batching    │  │ Handling    │   │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

*These diagrams provide a comprehensive visual representation of the Business Services Hub architecture, helping developers and stakeholders understand the system structure, data flow, and component relationships.*
